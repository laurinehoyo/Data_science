data$consumption[data$consumption > 12] <- NA
data$power <- na_if(data$power, "-")
data$power <- parse_number(data$power)
data$expertise[data$expertise == "Non"] <- FALSE
data$expertise[data$expertise == "Oui"] <- TRUE
data$expertise <- as.logical(data$expertise)
data$accident[data$accident == "Non"] <- FALSE
data$accident[data$accident == "Oui"] <- TRUE
data$accident <- as.logical(data$accident)
data$warranty[data$warranty == "Non"] <- FALSE
data$warranty[data$warranty == "Oui"] <- TRUE
data$warranty <- as.logical(data$warranty)
data$new.price <- na_if(data$new.price, "Oui")
data$new.price <- na_if(data$new.price, "Non")
data$new.price <- parse_number(data$new.price, locale = locale(grouping_mark = "'"))
unique(data$new.price[order(data$new.price)])
data$new.price[data$new.price < 5000] <- NA
data <- data[-c(1:4)]
unique(data$date[order(data$date)])
data$date[2802] <- NA
data$date <- data$date |>
format(format = "%m.%Y") |>
parse_date(format = "%m.%Y")
data$created.date <- parse_date(data$created.date)
data$expertise.date <- data$expertise.date |>
format(format = "%d.%m.%Y") |>
parse_date(format = "%d.%m.%Y")
defective_keywords_de <- c("defekt", "defect", "startet nicht", "starttet nicht", "gebrochen", "lampe leuchtet", "für export", "gerausche", "geräusche", "gerräusche", "angebrochen", "angeschlagen", "beschädigt", "fehlerhaft", "lädiert", "nicht in Ordnung", "nicht mehr funktionierend", "schadhaft", "zerbrochen", "zerrissen", "kaputt" )
defective_keywords_2_de <- c("schäden", "problem", "schade", "probleme", "schaden")
ok_keywords_de <- c(paste("ohne", defective_keywords_de_2, sep = " "), paste("kein", defective_keywords_fr_2, sep = " "), paste("keine", defective_keywords_fr_2, sep = " "))
defective_keywords_fr <- c("témoin", "bruit", "défaut", "ne démarre pas", "cassé", "pour export", "endommagé", "endommager", "endommage", "défectueux", "defectueux", "pas en bon état", "ne fonctionne plus", "cassé")
defective_keywords_fr_2 <- c("dégâts", "dégats", "degâts", "degats", "problème", "probleme", "dommages")
ok_keywords_fr <- c(paste("sans", defective_keywords_fr_2, sep = " "), paste("pas de", defective_keywords_fr_2, sep = " "), paste("aucun", defective_keywords_fr_2, sep = " "))
defective_keywords_it <- c("spia", "rumore", "difetto", "non parte", "non si avvia", "rotto", "per l'esportazione", "per export", "danneggiato", "danneggiare", "danneggia", "difettoso", "non in buone condizioni", "non funziona più")
defective_keywords_fr_2 <- c("danni", "problemi", "problema")
ok_keywords_fr <- c(paste("nessun", defective_keywords_it_2, sep = " "), paste("senza", defective_keywords_it_2, sep = " "))
defective_keywords_en <- c("defective", "does not start", "won't start", "broken", "light on", "for export", "noise", "faulty", "not working", "no longer working")
defective_keywords_2_en <- c("damage", "damaged", "problem", "problems")
ok_keywords_en <- c(paste("no", defective_keywords_en_2, sep = " "), paste("without", defective_keywords_en_2, sep = " "), paste("not", defective_keywords_en_2, sep = " "))
data <- mutate(data, defective = FALSE)
defective_keywords_df <- data.frame(defective_keywords_de, defective_keywords_fr, defective_keywords_it, defective_keywords_en)
defective_keywords_list <- list(defective_keywords_de, defective_keywords_fr, defective_keywords_it, defective_keywords_en)
View(defective_keywords_list)
data <- mutate(data, defective = FALSE)
for (keyword in defective_keywords_list) {
data <- mutate(data$defective, ifelse(grepl(keyword, data$subtitle, ignore.case = TRUE) | grepl(keyword, data$description.text, ignore.case = TRUE), TRUE, data$defective))
}
data <- subset(data, select = -data$defective)
rm(data)
library(tidyverse)
library(lubridate)
setwd("~/GitHub/Data_science/data")
data <- read.csv("golf2.csv")
golf2 <- read.csv("golf2.csv")
data$price <- parse_number(data$price, locale = locale(grouping_mark = "'"))
data$kilometers <- parse_number(data$kilometers, locale = locale(grouping_mark = "'"))
data$listing.id <- parse_number(data$listing.id)
data$consumption <- na_if(data$consumption, "-")
data$consumption <- parse_number(data$consumption)
unique(data$consumption[order(data$consumption)])
data$consumption[data$consumption > 12] <- NA
data$power <- na_if(data$power, "-")
data$power <- parse_number(data$power)
data$expertise[data$expertise == "Non"] <- FALSE
data$expertise[data$expertise == "Oui"] <- TRUE
data$expertise <- as.logical(data$expertise)
data$accident[data$accident == "Non"] <- FALSE
data$accident[data$accident == "Oui"] <- TRUE
data$accident <- as.logical(data$accident)
data$warranty[data$warranty == "Non"] <- FALSE
data$warranty[data$warranty == "Oui"] <- TRUE
data$warranty <- as.logical(data$warranty)
data$new.price <- na_if(data$new.price, "Oui")
data$new.price <- na_if(data$new.price, "Non")
data$new.price <- parse_number(data$new.price, locale = locale(grouping_mark = "'"))
unique(data$new.price[order(data$new.price)])
data$new.price[data$new.price < 5000] <- NA
data <- data[-c(1:4)]
unique(data$date[order(data$date)])
data$date[2802] <- NA
data$date <- data$date |>
format(format = "%m.%Y") |>
parse_date(format = "%m.%Y")
data$created.date <- parse_date(data$created.date)
data$expertise.date <- data$expertise.date |>
format(format = "%d.%m.%Y") |>
parse_date(format = "%d.%m.%Y")
defective_keywords_de <- c("defekt", "defect", "startet nicht", "starttet nicht", "gebrochen", "lampe leuchtet", "für export", "gerausche", "geräusche", "gerräusche", "angebrochen", "angeschlagen", "beschädigt", "fehlerhaft", "lädiert", "nicht in Ordnung", "nicht mehr funktionierend", "schadhaft", "zerbrochen", "zerrissen", "kaputt" )
defective_keywords_2_de <- c("schäden", "problem", "schade", "probleme", "schaden")
ok_keywords_de <- c(paste("ohne", defective_keywords_de_2, sep = " "), paste("kein", defective_keywords_fr_2, sep = " "), paste("keine", defective_keywords_fr_2, sep = " "))
defective_keywords_fr <- c("témoin", "bruit", "défaut", "ne démarre pas", "cassé", "pour export", "endommagé", "endommager", "endommage", "défectueux", "defectueux", "pas en bon état", "ne fonctionne plus", "cassé")
defective_keywords_fr_2 <- c("dégâts", "dégats", "degâts", "degats", "problème", "probleme", "dommages")
ok_keywords_fr <- c(paste("sans", defective_keywords_fr_2, sep = " "), paste("pas de", defective_keywords_fr_2, sep = " "), paste("aucun", defective_keywords_fr_2, sep = " "))
defective_keywords_it <- c("spia", "rumore", "difetto", "non parte", "non si avvia", "rotto", "per l'esportazione", "per export", "danneggiato", "danneggiare", "danneggia", "difettoso", "non in buone condizioni", "non funziona più")
defective_keywords_fr_2 <- c("danni", "problemi", "problema")
ok_keywords_fr <- c(paste("nessun", defective_keywords_it_2, sep = " "), paste("senza", defective_keywords_it_2, sep = " "))
defective_keywords_en <- c("defective", "does not start", "won't start", "broken", "light on", "for export", "noise", "faulty", "not working", "no longer working")
defective_keywords_2_en <- c("damage", "damaged", "problem", "problems")
ok_keywords_en <- c(paste("no", defective_keywords_en_2, sep = " "), paste("without", defective_keywords_en_2, sep = " "), paste("not", defective_keywords_en_2, sep = " "))
defective_keywords_list <- list(defective_keywords_de, defective_keywords_fr, defective_keywords_it, defective_keywords_en)
data <- mutate(data, defective = FALSE)
for (keyword in defective_keywords_list) {
data <- mutate(data$defective, ifelse(grepl(keyword, data$subtitle, ignore.case = TRUE) | grepl(keyword, data$description.text, ignore.case = TRUE), TRUE, data$defective))
}
data <- data[, -data$defective]
View(data)
rm(data)
library(tidyverse)
library(lubridate)
setwd("~/GitHub/Data_science/data")
data <- read.csv("golf2.csv")
golf2 <- read.csv("golf2.csv")
data$price <- parse_number(data$price, locale = locale(grouping_mark = "'"))
data$kilometers <- parse_number(data$kilometers, locale = locale(grouping_mark = "'"))
data$listing.id <- parse_number(data$listing.id)
data$consumption <- na_if(data$consumption, "-")
data$consumption <- parse_number(data$consumption)
unique(data$consumption[order(data$consumption)])
data$consumption[data$consumption > 12] <- NA
data$power <- na_if(data$power, "-")
data$power <- parse_number(data$power)
data$expertise[data$expertise == "Non"] <- FALSE
data$expertise[data$expertise == "Oui"] <- TRUE
data$expertise <- as.logical(data$expertise)
data$accident[data$accident == "Non"] <- FALSE
data$accident[data$accident == "Oui"] <- TRUE
data$accident <- as.logical(data$accident)
data$warranty[data$warranty == "Non"] <- FALSE
data$warranty[data$warranty == "Oui"] <- TRUE
data$warranty <- as.logical(data$warranty)
data$new.price <- na_if(data$new.price, "Oui")
data$new.price <- na_if(data$new.price, "Non")
data$new.price <- parse_number(data$new.price, locale = locale(grouping_mark = "'"))
unique(data$new.price[order(data$new.price)])
data$new.price[data$new.price < 5000] <- NA
data <- data[-c(1:4)]
unique(data$date[order(data$date)])
data$date[2802] <- NA
data$date <- data$date |>
format(format = "%m.%Y") |>
parse_date(format = "%m.%Y")
data$created.date <- parse_date(data$created.date)
data$expertise.date <- data$expertise.date |>
format(format = "%d.%m.%Y") |>
parse_date(format = "%d.%m.%Y")
defective_keywords_de <- c("defekt", "defect", "startet nicht", "starttet nicht", "gebrochen", "lampe leuchtet", "für export", "gerausche", "geräusche", "gerräusche", "angebrochen", "angeschlagen", "beschädigt", "fehlerhaft", "lädiert", "nicht in Ordnung", "nicht mehr funktionierend", "schadhaft", "zerbrochen", "zerrissen", "kaputt" )
defective_keywords_2_de <- c("schäden", "problem", "schade", "probleme", "schaden")
ok_keywords_de <- c(paste("ohne", defective_keywords_de_2, sep = " "), paste("kein", defective_keywords_fr_2, sep = " "), paste("keine", defective_keywords_fr_2, sep = " "))
defective_keywords_fr <- c("témoin", "bruit", "défaut", "ne démarre pas", "cassé", "pour export", "endommagé", "endommager", "endommage", "défectueux", "defectueux", "pas en bon état", "ne fonctionne plus", "cassé")
defective_keywords_fr_2 <- c("dégâts", "dégats", "degâts", "degats", "problème", "probleme", "dommages")
ok_keywords_fr <- c(paste("sans", defective_keywords_fr_2, sep = " "), paste("pas de", defective_keywords_fr_2, sep = " "), paste("aucun", defective_keywords_fr_2, sep = " "))
defective_keywords_it <- c("spia", "rumore", "difetto", "non parte", "non si avvia", "rotto", "per l'esportazione", "per export", "danneggiato", "danneggiare", "danneggia", "difettoso", "non in buone condizioni", "non funziona più")
defective_keywords_fr_2 <- c("danni", "problemi", "problema")
ok_keywords_fr <- c(paste("nessun", defective_keywords_it_2, sep = " "), paste("senza", defective_keywords_it_2, sep = " "))
defective_keywords_en <- c("defective", "does not start", "won't start", "broken", "light on", "for export", "noise", "faulty", "not working", "no longer working")
defective_keywords_2_en <- c("damage", "damaged", "problem", "problems")
ok_keywords_en <- c(paste("no", defective_keywords_en_2, sep = " "), paste("without", defective_keywords_en_2, sep = " "), paste("not", defective_keywords_en_2, sep = " "))
defective_keywords_list <- list(defective_keywords_de, defective_keywords_fr, defective_keywords_it, defective_keywords_en)
data <- mutate(data, defective = FALSE)
View(data)
data <- mutate(data$defective, apply(data[, c("subtitle", "description.text")], 1,
function(row) any(sapply(defective_keywords_list, function(keyword) grepl(keyword,row, ignore.case = TRUE)))))
data <- data[, -defective]
data <- subset(data, select = [1:22])
data <- data[, 1:22]
defective <- logical(length = length(data))
View(defective_keywords_list)
defective
defective <- logical(length = nrow(data))
defective
data |>
for(keyword in defective_keywords_list) {
mutate(defective = (grepl(keyword, data$subtitle, ignore.case = TRUE) | grepl(keyword, data$description.text, ignore.case = TRUE)) )
}
for(keyword in defective_keywords_list) {
mutate(data, defective = (grepl(keyword, data$subtitle, ignore.case = TRUE) | grepl(keyword, data$description.text, ignore.case = TRUE)) )
}
dplyr::last_dplyr_warnings()
defective_keywords <- c(defective_keywords_de, defective_keywords_fr, defective_keywords_it, defective_keywords_en)
for(keyword in defective_keywords_list) {
mutate(data, defective = (grepl(keyword, data$subtitle, ignore.case = TRUE) | grepl(keyword, data$description.text, ignore.case = TRUE)) )
}
rm(defective_keywords_list)
for(keyword in defective_keywords) {
mutate(data, defective = (grepl(keyword, data$subtitle, ignore.case = TRUE) | grepl(keyword, data$description.text, ignore.case = TRUE)) )
}
mutate(data, defective)
mutate(data, defective)
defective
mutate(data, defective)
mutate(data, defective <- logical(length = nrow(data)))
for(keyword in defective_keywords) {
mutate(data, defective = (grepl(keyword, data$subtitle, ignore.case = TRUE) | grepl(keyword, data$description.text, ignore.case = TRUE)) )
}
print(for(keyword in defective_keywords) {
mutate(data, defective = (grepl(keyword, data$subtitle, ignore.case = TRUE) | grepl(keyword, data$description.text, ignore.case = TRUE)) )
})
for(keyword in defective_keywords) {
data <- mutate(data, defective = (grepl(keyword, data$subtitle, ignore.case = TRUE) | grepl(keyword, data$description.text, ignore.case = TRUE)) )
}
unique(data$defective)
defective_keywords
for (keyword in defective_keywords) {
data <- mutate(data$defective, ifelse(grepl(keyword, data$subtitle, ignore.case = TRUE) | grepl(keyword, data$description.text, ignore.case = TRUE), TRUE, data$defective))
}
for (keyword in defective_keywords) {
data <- mutate(data, ifelse(grepl(keyword, data$subtitle, ignore.case = TRUE) | grepl(keyword, data$description.text, ignore.case = TRUE), TRUE, data$defective))
}
summary(data)
unique(data$`ifelse(...)`)
for(keyword in defective_keywords) {
data <- mutate(data, defective = (grepl(keyword, data$subtitle, ignore.case = TRUE) | grepl(keyword, data$description.text, ignore.case = TRUE)) )
}
data <- data[, 1:22]
for(keyword in defective_keywords) {
data <- mutate(data, defective = (grepl(keyword, data$subtitle, ignore.case = TRUE) | grepl(keyword, data$description.text, ignore.case = TRUE)) )
}
defective_keywords
unique(defective)
data <- mutate(data, defective)
grepl("Limousine", data$body.type)
grepl("defekt", data$subtitle, ignore.case = TRUE)
for(keyword in defective_keywords) {
data <- mutate(data, defective = TRUE )
}
for(keyword in defective_keywords) {
data <- mutate(data, defective = (grepl(keyword, data$subtitle, ignore.case = TRUE)))
}
for(i in defective_keywords) {
data <- mutate(data, defective = (grepl(keyword, data$subtitle, ignore.case = TRUE)))
}
unique(data$defective)
for(i in defective_keywords) {
data <- mutate(data, defective = (grepl(i, data$subtitle, ignore.case = TRUE)))
}
unique(defective)
for (keyword in defective_keywords) {
data$defective <- data$defective | grepl(keyword, data$subtitle, ignore.case = TRUE)
}
defective_keywords_de <- c("defekt", "defect", "startet nicht", "starttet nicht", "gebrochen", "lampe leuchtet", "für export", "fur export", "gerausche", "geräusche", "gerräusche", "angebrochen", "angeschlagen", "beschädigt", "fehlerhaft", "lädiert", "nicht in Ordnung", "nicht mehr funktionierend", "schadhaft", "zerbrochen", "zerrissen", "kaputt" )
defective_keywords <- c(defective_keywords_de, defective_keywords_fr, defective_keywords_it, defective_keywords_en)
library(tidyverse)
library(lubridate)
setwd("~/GitHub/Data_science/data")
data <- read.csv("golf2.csv")
golf2 <- read.csv("golf2.csv")
data$price <- parse_number(data$price, locale = locale(grouping_mark = "'"))
data$kilometers <- parse_number(data$kilometers, locale = locale(grouping_mark = "'"))
data$listing.id <- parse_number(data$listing.id)
data$consumption <- na_if(data$consumption, "-")
data$consumption <- parse_number(data$consumption)
unique(data$consumption[order(data$consumption)])
data$consumption[data$consumption > 12] <- NA
data$power <- na_if(data$power, "-")
data$power <- parse_number(data$power)
data$expertise[data$expertise == "Non"] <- FALSE
data$expertise[data$expertise == "Oui"] <- TRUE
data$expertise <- as.logical(data$expertise)
data$accident[data$accident == "Non"] <- FALSE
data$accident[data$accident == "Oui"] <- TRUE
data$accident <- as.logical(data$accident)
data$warranty[data$warranty == "Non"] <- FALSE
data$warranty[data$warranty == "Oui"] <- TRUE
data$warranty <- as.logical(data$warranty)
data$new.price <- na_if(data$new.price, "Oui")
data$new.price <- na_if(data$new.price, "Non")
data$new.price <- parse_number(data$new.price, locale = locale(grouping_mark = "'"))
unique(data$new.price[order(data$new.price)])
data$new.price[data$new.price < 5000] <- NA
data <- data[-c(1:4)]
unique(data$date[order(data$date)])
data$date[2802] <- NA
data$date <- data$date |>
format(format = "%m.%Y") |>
parse_date(format = "%m.%Y")
data$created.date <- parse_date(data$created.date)
data$expertise.date <- data$expertise.date |>
format(format = "%d.%m.%Y") |>
parse_date(format = "%d.%m.%Y")
defective_keywords_de <- c("defekt", "defect", "startet nicht", "starttet nicht", "gebrochen", "lampe leuchtet", "für export", "fur export", "gerausche", "geräusche", "gerräusche", "angebrochen", "angeschlagen", "beschädigt", "fehlerhaft", "lädiert", "nicht in Ordnung", "nicht mehr funktionierend", "schadhaft", "zerbrochen", "zerrissen", "kaputt" )
defective_keywords_2_de <- c("schäden", "problem", "schade", "probleme", "schaden")
ok_keywords_de <- c(paste("ohne", defective_keywords_de_2, sep = " "), paste("kein", defective_keywords_fr_2, sep = " "), paste("keine", defective_keywords_fr_2, sep = " "))
defective_keywords_fr <- c("témoin", "bruit", "défaut", "ne démarre pas", "cassé", "pour export", "endommagé", "endommager", "endommage", "défectueux", "defectueux", "pas en bon état", "ne fonctionne plus", "cassé")
defective_keywords_fr_2 <- c("dégâts", "dégats", "degâts", "degats", "problème", "probleme", "dommages")
ok_keywords_fr <- c(paste("sans", defective_keywords_fr_2, sep = " "), paste("pas de", defective_keywords_fr_2, sep = " "), paste("aucun", defective_keywords_fr_2, sep = " "))
defective_keywords_it <- c("spia", "rumore", "difetto", "non parte", "non si avvia", "rotto", "per l'esportazione", "per export", "danneggiato", "danneggiare", "danneggia", "difettoso", "non in buone condizioni", "non funziona più")
defective_keywords_fr_2 <- c("danni", "problemi", "problema")
ok_keywords_fr <- c(paste("nessun", defective_keywords_it_2, sep = " "), paste("senza", defective_keywords_it_2, sep = " "))
defective_keywords_en <- c("defective", "does not start", "won't start", "broken", "light on", "for export", "noise", "faulty", "not working", "no longer working")
defective_keywords_2_en <- c("damage", "damaged", "problem", "problems")
ok_keywords_en <- c(paste("no", defective_keywords_en_2, sep = " "), paste("without", defective_keywords_en_2, sep = " "), paste("not", defective_keywords_en_2, sep = " "))
defective_keywords <- c(defective_keywords_de, defective_keywords_fr, defective_keywords_it, defective_keywords_en)
#this one is working
for (keyword in defective_keywords) {
data$defective <- data$defective | grepl(keyword, data$subtitle, ignore.case = TRUE | grepl())
}
#this one is working
for (keyword in defective_keywords) {
data$defective <- data$defective | grepl(keyword, x = data$subtitle, ignore.case = TRUE | grepl())
}
data$defective <- data$defective | grepl(keyword, data$subtitle, ignore.case = TRUE)
#this one is working
for (keyword in defective_keywords) {
data$defective <- data$defective | grepl(keyword, data$subtitle, ignore.case = TRUE)
}
data$defective <- logical(nrow(data))
#this one is working
for (keyword in defective_keywords) {
data$defective <- data$defective | grepl(keyword, data$subtitle, ignore.case = TRUE)
}
#this one is working
for (keyword in defective_keywords) {
data$defective <- data$defective | grepl(keyword, data$subtitle, ignore.case = TRUE | grepl("Mecanisch", data$description.text, ignore.case = TRUE))
}
#this one is working
for (keyword in defective_keywords) {
data$defective <- data$defective | grepl(keyword, data$subtitle, ignore.case = TRUE | grepl(keyword, data$description.text, ignore.case = TRUE))
}
defective_keywords_fr <- c("témoin", "bruit", "défaut", "ne démarre pas", "cassé", "pour export", "pour l'export", "endommagé", "endommager", "endommage", "défectueux", "defectueux", "pas en bon état", "ne fonctionne plus", "cassé")
defective_keywords <- c(defective_keywords_de, defective_keywords_fr, defective_keywords_it, defective_keywords_en)
#this one is working
for (keyword in defective_keywords) {
data$defective <- data$defective | grepl(keyword, data$subtitle, ignore.case = TRUE | grepl(keyword, data$description.text, ignore.case = TRUE))
}
data$defective <- logical(nrow(data))
#this one is working
for (keyword in defective_keywords) {
data$defective <- data$defective | grepl(keyword, data$description.text, ignore.case = TRUE)
}
library(tidyverse)
library(lubridate)
setwd("~/GitHub/Data_science/data")
data <- read.csv("golf2.csv")
golf2 <- read.csv("golf2.csv")
data$price <- parse_number(data$price, locale = locale(grouping_mark = "'"))
data$kilometers <- parse_number(data$kilometers, locale = locale(grouping_mark = "'"))
data$listing.id <- parse_number(data$listing.id)
data$consumption <- na_if(data$consumption, "-")
data$consumption <- parse_number(data$consumption)
unique(data$consumption[order(data$consumption)])
data$consumption[data$consumption > 12] <- NA
data$power <- na_if(data$power, "-")
data$power <- parse_number(data$power)
data$expertise[data$expertise == "Non"] <- FALSE
data$expertise[data$expertise == "Oui"] <- TRUE
data$expertise <- as.logical(data$expertise)
data$accident[data$accident == "Non"] <- FALSE
data$accident[data$accident == "Oui"] <- TRUE
data$accident <- as.logical(data$accident)
data$warranty[data$warranty == "Non"] <- FALSE
data$warranty[data$warranty == "Oui"] <- TRUE
data$warranty <- as.logical(data$warranty)
data$new.price <- na_if(data$new.price, "Oui")
data$new.price <- na_if(data$new.price, "Non")
data$new.price <- parse_number(data$new.price, locale = locale(grouping_mark = "'"))
unique(data$new.price[order(data$new.price)])
data$new.price[data$new.price < 5000] <- NA
data <- data[-c(1:4)]
unique(data$date[order(data$date)])
data$date[2802] <- NA
data$date <- data$date |>
format(format = "%m.%Y") |>
parse_date(format = "%m.%Y")
data$created.date <- parse_date(data$created.date)
data$expertise.date <- data$expertise.date |>
format(format = "%d.%m.%Y") |>
parse_date(format = "%d.%m.%Y")
defective_keywords_de <- c("defekt", "defect", "startet nicht", "starttet nicht", "gebrochen", "lampe leuchtet", "für export", "fur export", "gerausche", "geräusche", "gerräusche", "angebrochen", "angeschlagen", "beschädigt", "fehlerhaft", "lädiert", "nicht in Ordnung", "nicht mehr funktionierend", "schadhaft", "zerbrochen", "zerrissen", "kaputt" )
defective_keywords_2_de <- c("schäden", "problem", "schade", "probleme", "schaden")
ok_keywords_de <- c(paste("ohne", defective_keywords_de_2, sep = " "), paste("kein", defective_keywords_fr_2, sep = " "), paste("keine", defective_keywords_fr_2, sep = " "))
defective_keywords_fr <- c("témoin", "bruit", "défaut", "ne démarre pas", "cassé", "pour export", "pour l'export", "endommagé", "endommager", "endommage", "défectueux", "defectueux", "pas en bon état", "ne fonctionne plus", "cassé")
defective_keywords_fr_2 <- c("dégâts", "dégats", "degâts", "degats", "problème", "probleme", "dommages")
ok_keywords_fr <- c(paste("sans", defective_keywords_fr_2, sep = " "), paste("pas de", defective_keywords_fr_2, sep = " "), paste("aucun", defective_keywords_fr_2, sep = " "))
defective_keywords_it <- c("spia", "rumore", "difetto", "non parte", "non si avvia", "rotto", "per l'esportazione", "per export", "danneggiato", "danneggiare", "danneggia", "difettoso", "non in buone condizioni", "non funziona più")
defective_keywords_fr_2 <- c("danni", "problemi", "problema")
ok_keywords_fr <- c(paste("nessun", defective_keywords_it_2, sep = " "), paste("senza", defective_keywords_it_2, sep = " "))
defective_keywords_en <- c("defective", "does not start", "won't start", "broken", "light on", "for export", "noise", "faulty", "not working", "no longer working")
defective_keywords_2_en <- c("damage", "damaged", "problem", "problems")
ok_keywords_en <- c(paste("no", defective_keywords_en_2, sep = " "), paste("without", defective_keywords_en_2, sep = " "), paste("not", defective_keywords_en_2, sep = " "))
defective_keywords <- c(defective_keywords_de, defective_keywords_fr, defective_keywords_it, defective_keywords_en)
data$defective <- logical(nrow(data))
#this one is working
for (keyword in defective_keywords) {
data$defective <- data$defective | grepl(keyword, data$description.text, ignore.case = TRUE)
}
View(data)
defective_keywords
defective_keywords_de <- c("defekt", "defect", "startet nicht", "starttet nicht", "gebrochen", "lampe leuchtet", "für export", "fur export", "gerausche", "geräusche", "gerräusche", "angebrochen", "angeschlagen", "beschädigt", "fehlerhaft", "lädiert", "nicht in Ordnung", "nicht mehr funktionierend", "nicht mehr gut", "schadhaft", "zerbrochen", "zerrissen", "kaputt" )
defective_keywords <- c(defective_keywords_de, defective_keywords_fr, defective_keywords_it, defective_keywords_en)
#this one is working
for (keyword in defective_keywords) {
data$defective <- data$defective | grepl(keyword, data$description.text, ignore.case = TRUE)
}
#this one is working
for (keyword in defective_keywords) {
data$defective <- data$defective | grepl(keyword, data$description.text, ignore.case = TRUE | grepl(keyword, data$subtitle, ignore.case = TRUE))
}
for (keyword in defective_keywords) {
data$defective <- data$defective | grepl(keyword, data$subtitle, ignore.case = TRUE)
}
defective_keywords_2 <- c(defective_keywords_2_de, defective_keywords_2_fr, defective_keywords_2_it, defective_keywords_2_en)
ok_keywords <- c(ok_keywords_de, ok_keywords_fr, ok_keywords_it, ok_keywords_en)
library(tidyverse)
library(lubridate)
setwd("~/GitHub/Data_science/data")
data <- read.csv("golf2.csv")
golf2 <- read.csv("golf2.csv")
data$price <- parse_number(data$price, locale = locale(grouping_mark = "'"))
data$kilometers <- parse_number(data$kilometers, locale = locale(grouping_mark = "'"))
data$listing.id <- parse_number(data$listing.id)
data$consumption <- na_if(data$consumption, "-")
data$consumption <- parse_number(data$consumption)
unique(data$consumption[order(data$consumption)])
data$consumption[data$consumption > 12] <- NA
data$power <- na_if(data$power, "-")
data$power <- parse_number(data$power)
data$expertise[data$expertise == "Non"] <- FALSE
data$expertise[data$expertise == "Oui"] <- TRUE
data$expertise <- as.logical(data$expertise)
data$accident[data$accident == "Non"] <- FALSE
data$accident[data$accident == "Oui"] <- TRUE
data$accident <- as.logical(data$accident)
data$warranty[data$warranty == "Non"] <- FALSE
data$warranty[data$warranty == "Oui"] <- TRUE
data$warranty <- as.logical(data$warranty)
data$new.price <- na_if(data$new.price, "Oui")
data$new.price <- na_if(data$new.price, "Non")
data$new.price <- parse_number(data$new.price, locale = locale(grouping_mark = "'"))
unique(data$new.price[order(data$new.price)])
data$new.price[data$new.price < 5000] <- NA
data <- data[-c(1:4)]
unique(data$date[order(data$date)])
data$date[2802] <- NA
data$date <- data$date |>
format(format = "%m.%Y") |>
parse_date(format = "%m.%Y")
data$created.date <- parse_date(data$created.date)
data$expertise.date <- data$expertise.date |>
format(format = "%d.%m.%Y") |>
parse_date(format = "%d.%m.%Y")
defective_keywords_de <- c("defekt", "defect", "startet nicht", "starttet nicht", "gebrochen", "lampe leuchtet", "für export", "fur export", "gerausche", "geräusche", "gerräusche", "angebrochen", "angeschlagen", "beschädigt", "fehlerhaft", "lädiert", "nicht in Ordnung", "nicht mehr funktionierend", "nicht mehr gut", "schadhaft", "zerbrochen", "zerrissen", "kaputt" )
defective_keywords_2_de <- c("schäden", "problem", "schade", "probleme", "schaden")
ok_keywords_de <- c(paste("ohne", defective_keywords_de_2, sep = " "), paste("kein", defective_keywords_fr_2, sep = " "), paste("keine", defective_keywords_fr_2, sep = " "))
defective_keywords_fr <- c("témoin", "bruit", "défaut", "ne démarre pas", "cassé", "pour export", "pour l'export", "endommagé", "endommager", "endommage", "défectueux", "defectueux", "pas en bon état", "ne fonctionne plus", "cassé")
defective_keywords_fr_2 <- c("dégâts", "dégats", "degâts", "degats", "problème", "probleme", "dommages")
ok_keywords_fr <- c(paste("sans", defective_keywords_fr_2, sep = " "), paste("pas de", defective_keywords_fr_2, sep = " "), paste("aucun", defective_keywords_fr_2, sep = " "))
defective_keywords_it <- c("spia", "rumore", "difetto", "non parte", "non si avvia", "rotto", "per l'esportazione", "per export", "danneggiato", "danneggiare", "danneggia", "difettoso", "non in buone condizioni", "non funziona più")
defective_keywords_fr_2 <- c("danni", "problemi", "problema")
ok_keywords_fr <- c(paste("nessun", defective_keywords_it_2, sep = " "), paste("senza", defective_keywords_it_2, sep = " "))
defective_keywords_en <- c("defective", "does not start", "won't start", "broken", "light on", "for export", "noise", "faulty", "not working", "no longer working")
defective_keywords_2_en <- c("damage", "damaged", "problem", "problems")
ok_keywords_en <- c(paste("no", defective_keywords_en_2, sep = " "), paste("without", defective_keywords_en_2, sep = " "), paste("not", defective_keywords_en_2, sep = " "))
defective_keywords <- c(defective_keywords_de, defective_keywords_fr, defective_keywords_it, defective_keywords_en)
defective_keywords_2 <- c(defective_keywords_2_de, defective_keywords_2_fr, defective_keywords_2_it, defective_keywords_2_en)
ok_keywords <- c(ok_keywords_de, ok_keywords_fr, ok_keywords_it, ok_keywords_en)
data$defective <- logical(nrow(data))
defective_keywords_de <- c("defekt", "defect", "startet nicht", "starttet nicht", "gebrochen", "lampe leuchtet", "für export", "fur export", "gerausche", "geräusche", "gerräusche", "angebrochen", "angeschlagen", "beschädigt", "fehlerhaft", "lädiert", "nicht in Ordnung", "nicht mehr funktionierend", "nicht mehr gut", "schadhaft", "zerbrochen", "zerrissen", "kaputt" )
defective_keywords_2_de <- c("schäden", "problem", "schade", "probleme", "schaden")
ok_keywords_de <- c(paste("ohne", defective_keywords_de_2, sep = " "), paste("kein", defective_keywords_fr_2, sep = " "), paste("keine", defective_keywords_fr_2, sep = " "))
ok_keywords_de <- c(paste("ohne", defective_keywords_de_2, sep = " "), paste("kein", defective_keywords_fr_2, sep = " "), paste("keine", defective_keywords_fr_2, sep = " "))
defective_keywords_de <- c("defekt", "defect", "startet nicht", "starttet nicht", "gebrochen", "lampe leuchtet", "für export", "fur export", "gerausche", "geräusche", "gerräusche", "angebrochen", "angeschlagen", "beschädigt", "fehlerhaft", "lädiert", "nicht in Ordnung", "nicht mehr funktionierend", "nicht mehr gut", "schadhaft", "zerbrochen", "zerrissen", "kaputt" )
defective_keywords_2_de <- c("schäden", "problem", "schade", "probleme", "schaden")
ok_keywords_de <- c(paste("ohne", defective_keywords_2_de, sep = " "), paste("kein", defective_keywords_2_de, sep = " "), paste("keine", defective_keywords_2_de, sep = " "))
defective_keywords_fr <- c("témoin", "bruit", "défaut", "ne démarre pas", "cassé", "pour export", "pour l'export", "endommagé", "endommager", "endommage", "défectueux", "defectueux", "pas en bon état", "ne fonctionne plus", "cassé")
defective_keywords_2_fr <- c("dégâts", "dégats", "degâts", "degats", "problème", "probleme", "dommages")
ok_keywords_fr <- c(paste("sans", defective_keywords_2_fr, sep = " "), paste("pas de", defective_keywords_2_fr, sep = " "), paste("aucun", defective_keywords_2_fr, sep = " "))
defective_keywords_it <- c("spia", "rumore", "difetto", "non parte", "non si avvia", "rotto", "per l'esportazione", "per export", "danneggiato", "danneggiare", "danneggia", "difettoso", "non in buone condizioni", "non funziona più")
defective_keywords_2_it <- c("danni", "problemi", "problema")
ok_keywords_fr <- c(paste("nessun", defective_keywords_2_it, sep = " "), paste("senza", defective_keywords_2_it, sep = " "))
defective_keywords_en <- c("defective", "does not start", "won't start", "broken", "light on", "for export", "noise", "faulty", "not working", "no longer working")
defective_keywords_2_en <- c("damage", "damaged", "problem", "problems")
ok_keywords_en <- c(paste("no", defective_keywords_2_en, sep = " "), paste("without", defective_keywords_2_en, sep = " "), paste("not", defective_keywords_2_en, sep = " "))
defective_keywords <- c(defective_keywords_de, defective_keywords_fr, defective_keywords_it, defective_keywords_en)
defective_keywords_2 <- c(defective_keywords_2_de, defective_keywords_2_fr, defective_keywords_2_it, defective_keywords_2_en)
ok_keywords <- c(ok_keywords_de, ok_keywords_fr, ok_keywords_it, ok_keywords_en)
ok_keywords_fr <- c(paste("sans", defective_keywords_2_fr, sep = " "), paste("pas de", defective_keywords_2_fr, sep = " "), paste("aucun", defective_keywords_2_fr, sep = " "))
defective_keywords_it <- c("spia", "rumore", "difetto", "non parte", "non si avvia", "rotto", "per l'esportazione", "per export", "danneggiato", "danneggiare", "danneggia", "difettoso", "non in buone condizioni", "non funziona più")
defective_keywords_2_it <- c("danni", "problemi", "problema")
ok_keywords_it <- c(paste("nessun", defective_keywords_2_it, sep = " "), paste("senza", defective_keywords_2_it, sep = " "))
defective_keywords_en <- c("defective", "does not start", "won't start", "broken", "light on", "for export", "noise", "faulty", "not working", "no longer working")
defective_keywords_2_en <- c("damage", "damaged", "problem", "problems")
ok_keywords_en <- c(paste("no", defective_keywords_2_en, sep = " "), paste("without", defective_keywords_2_en, sep = " "), paste("not", defective_keywords_2_en, sep = " "))
defective_keywords <- c(defective_keywords_de, defective_keywords_fr, defective_keywords_it, defective_keywords_en)
defective_keywords_2 <- c(defective_keywords_2_de, defective_keywords_2_fr, defective_keywords_2_it, defective_keywords_2_en)
ok_keywords <- c(ok_keywords_de, ok_keywords_fr, ok_keywords_it, ok_keywords_en)
data$defective <- logical(nrow(data))
for (keyword in defective_keywords_2) {
data$defective <- data$defective | grepl(keyword, data$description.text, ignore.case = TRUE)
}
for (keyword in defective_keywords_2) {
data$defective <- data$defective | grepl(keyword, data$subtitle, ignore.case = TRUE)
}
for (keyword in ok_keywords) {
data$defective <- data$defective & !grepl(keyword, data$description.text, ignore.case = TRUE)
}
for (keyword in ok_keywords) {
data$defective <- data$defective & !grepl(keyword, data$subtitle, ignore.case = TRUE)
}
!FALSE
for (keyword in defective_keywords) {
data$defective <- data$defective | grepl(keyword, data$description.text, ignore.case = TRUE)
}
for (keyword in defective_keywords) {
data$defective <- data$defective | grepl(keyword, data$subtitle, ignore.case = TRUE)
}
count(data$defective)
count(data$body.type)
count(data$price)
count(data)
data$defective[TRUE]
table(data$defective)
data$description.text[2704]
